Jugar 3
<!DOCTYPE html>
<html lang="es-VE">
<head>
    <meta charset="UTF-8"/>
    <!--<meta name="language" content="es-VE"/>-->
    <meta name="viewport" content="width=device-width, initial-scala1.0" />
    <meta name="author" content="Salomon Trujillo" />
    <meta name="description" content="Este es el juego Batalla Naval"/>
    <meta name="keywords" content="Batalla Naval, juego, taller"/>
    <meta name="robots" content="noindex, nofollow" />
    <link rel="icon" href="https://static3.depositphotos.com/1007664/237/v/450/depositphotos_2376836-stock-illustration-battle-ship.jpg" type="imag/png " sizes="16x16 32x32 64x64">
    <link rel="stylesheet" href="../estilos/style.css">
    <script src="../scripts/script.js"></script>
    <title>BatallaNaval | Juego con tres</title>
</head>
<body>
    <div class="principal-jugar-tres">
        <header>
            <hgroup>
                <h1>Batalla Naval</h1>
                <h2>¡Se un ganador!</h2>
            </hgroup>
            <nav class="opciones-navegación"> 
                <a href="usuario.html">REGISTRO</a>
                <a href="reglas.html">REGLAS</a>
            </nav>
        </header>
        <main>

          <div class="generar-codigo"> 
            <div class="crear-partida">
                <button id="crear-partida" class="server-operation" href="#">Generar Código</button>
                <input type="text" id="id-partida" class="server-operation" placeholder="ID del juego" />
            </div>
        </div>

        <div class="unirse-a-juego">
          <button id="join-game" class="server-operation">Unirse a un juego existente</button>
          <input type="text" id="id-partida" class="server-operation" placeholder="ID del juego"/>
          <h3>Nombre:</h3>
          <input type="text" id="jugador1-name" class="server-operation" placeholder="Ingrese su nombre"/>
        </div>
      </div> 


            <div class="informacion-partida">
                <h3>TIEMPO: 00:00</h3>
                <h3>PUNTOS 000</h3>
            </div>

            <div class="jugadores">
              <div class="Jugador1">
                <h2 id="name-J1"></h2>
              <div id="jugador1-timer">60</div>
              </div>
              <div class="Jugador2">
                  <h2 id="name-J2"></h2>
                  <div id="jugador2-timer"timer>60</div>
              </div>

              <div class="Jugador3">
                <h2 id="name-J3"></h2>
                <div id="jugador3-timer"timer>60</div>
              </div>

            <div class="contenedor-principal">
              <!-- Contenedor para los barcos -->
              <div class="contenedor-barcos">
                  <div class="barcos"></div> <!-- Contenedor donde se crearán los barcos arrastrables -->
              </div>
            <div class="tableros">
                <div class="tablero-propio" id="tablero-propio-solo-2">

                </div>
                <div class="tablero-enemigo" id="tablero-enemigo-solo-3">

                </div>
                <div class="tablero-enemigo" id="tablero-enemigo-solo-4">
                
            </div>
        </div>
            <div class="powerup">
                <a href="#">power ups disponibles</a>
                <a href="power-ups.html">POWER UPS</a><!--aqui va un popup mostarndo la información de powerups-->
            </div>

            <div class="conexion-ws">
                <div id="iniciar-partida">
                    <button id="iniciar-partida" class="server-operation" >Jugar</button>
                </div>
                <div class="salir-partida">
                    <button id="dejar-partida" class="server-operation">RENDIRSE</button>
                </div>
                <div id="cerrar-conexion">
                    <button id="cerrar-conexion" class="client-operation">Cerrar Conexion</button>
                </div>
            </div>
        </main>
        <footer>
            <h3>by: Ing.Salomón Trujillo | Program Web | Ucab</h3>
        </footer>
    </div>


    <script>
      const WEBSOCKET_SCHEME = 'ws';
      const WEBSOCKET_SERVER = 'localhost';
      const WEBSOCKET_PORT = 9092;
      const WEBSOCKET_URL = `${WEBSOCKET_SCHEME}://${WEBSOCKET_SERVER}:${WEBSOCKET_PORT}`;
      let contador = 0;
    
      const socket = new WebSocket(WEBSOCKET_URL);
    
      socket.addEventListener('open', () => {
        console.log(`%cConecxion exitosa en ${WEBSOCKET_URL}`,  'color: #99ff00');
      });
    
      socket.addEventListener('message', (event) => {
        const message = JSON.parse(event.data);
        console.log('%c<- %cMensaje recibido desde el servidor:', 'color: #99ff00', 'color: inherit', message);

        if (message.type === 'error' && message.innerText === 'El juego no admite más jugadores...'){
          alert("La Partida a la que te intentas unir esta llena")
        }

        if (message.type === 'gameCreated') { 
          const gameIdInput = document.getElementById('id-partida');
          const playerNameElement = document.getElementById('name-J1'); 
    
          gameIdInput.value = message.gameId;  
          playerNameElement.innerText = `Jugador 1: ${message.playerName}`; 
            } 
    
        if (message.type === 'playerJoined' ) { 
          const playerNameElement2 = document.getElementById('name-J2'); 
          const playerNameElement3 = document.getElementById('name-J3'); 
          contador++;

              if(contador === 1){ playerNameElement2.innerText = `Jugador 2: ${message.playerName}`; }
              if(contador === 4){ playerNameElement3.innerText = `Jugador 3: ${message.playerName}`; }
          
            } 
      });
    
      
      //CREAR JUEGO
      document.getElementById('crear-partida').addEventListener('click', () => {
        const PlayerNameElement = document.getElementById('jugador1-name');
        const playerName = PlayerNameElement.value;
        const size = 3;
    
        if (playerName.trim()) {
            const message = { type: 'create', playerName , size}
            console.log('Enviando mensaje con', message);
            socket.send(JSON.stringify(message));
        } else { 
            alert("Por favor ingresa tu nombre antes de crear un juego."); 
        }
    
      });
    
          //UNIRSE A JUEGO
          document.getElementById('join-game').addEventListener('click', () => {
            const playerName = document.getElementById('jugador1-name').value;
            const gameId = document.getElementById('id-partida').value;
            const size = 3;
    
            if (playerName && gameId) { 
              socket.send(JSON.stringify({ type: 'join', gameId, playerName , size}));
            }
              else { 
                alert("Por favor ingresa tu nombre y el ID del juego antes de unirte."); 
              }
          });
    
      //EMPEZAR JUEGO
      document.getElementById('iniciar-partida').addEventListener('click', () => {
        const gameId = document.getElementById('id-partida').value;
        socket.send(JSON.stringify({ type: 'start', gameId }));
        console.log('Empezó el juego');
      });
    
      //ATACAR
      document.getElementById('atacar-enemigo').addEventListener('click', () => {
      
      const gameId = document.getElementById('id-partida').value;
      const move = document.getElementById('move').value;
    
      socket.send(JSON.stringify({ type: 'move', gameId, move }));
      });
    
      //SALIR DEL JUEGO
      document.getElementById('dejar-partida').addEventListener('click', () => {
        const gameId = document.getElementById('id-partida').value;
        socket.send(JSON.stringify({ type: 'leave', gameId }));
      });
    
      //CERRAR CONEXION
      document.getElementById('cerrar-conexion').addEventListener('click', () => {
        const response = confirm('¿Estás seguro de que deseas cerrar la conexión con el servidor de WebSocket?\n\nSi la cierras, no podrás enviar ni recibir más mensajes y, de acuerdo a esta implementación, tendrás que recargar la página.');
    
        if (response) {
          socket.close();
        }
      });
    </script>
    
</body>
</html>